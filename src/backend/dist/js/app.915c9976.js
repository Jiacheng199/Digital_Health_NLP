(function(){"use strict";var e={2693:function(e,t,a){var s=a(7195),o=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[t("router-view",{attrs:{to:"/home"}},[e._v("TEMP")])],1)},i=[],r=function(){var e=this,t=e._self._c;return t("div",[e.showUpload?t("el-upload",{ref:"upload",attrs:{action:"http://127.0.0.1:5000/upload",headers:{Authorization:"Barer "+e.userid},"auto-upload":!1,"on-preview":e.handlePreview,"on-change":e.handleChange,"before-remove":e.beforeRemove,"on-remove":e.handleRemove,"on-exceed":e.handleExceed,"on-success":e.handleSuccess,"file-list":e.fileList,multiple:""}},[t("el-button",{attrs:{slot:"trigger",type:"primary"},slot:"trigger"},[e._v("select file")]),t("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"success"},on:{click:e.submitUpload}},[e._v("upload to server")]),t("div",{staticClass:"el-upload__tip",staticStyle:{"font-size":"15px"},attrs:{slot:"tip"},slot:"tip"},[e._v("txt file with a size less than 200Mb")])],1):e._e(),e.showProcess?t("el-button",{on:{click:e.process}},[e._v("Process")]):e._e(),e.showDownload?t("el-button",{on:{click:function(t){return e.downloadFile()}}},[e._v("Download")]):e._e()],1)},l=[],n=(a(7658),a(306)),c={name:"Upload",created(){this.showUpload=!0,this.showDownload=!1,this.showProcess=!1},data(){return{showUpload:!0,showProcess:!1,showDownload:!1,file:"",fileList:[],userid:JSON.parse(localStorage.getItem("token")).userinfo.userid,file_id:""}},methods:{process(){console.log(JSON.parse(localStorage.getItem("file"))[0]),console.log(JSON.parse(localStorage.getItem("token")).userinfo.userid);try{const e=n.Z.post("http://127.0.0.1:5000/process",{file_id:JSON.parse(localStorage.getItem("file")),userid:JSON.parse(localStorage.getItem("token")).userinfo});console.log(e),this.$router.push("/mapping")}catch(e){console.log(e)}},downloadFile(e){(0,n.Z)({method:"post",url:"http://127.0.0.1:5000/download",data:{file_id:this.file_id,userid:JSON.parse(localStorage.getItem("token")).userinfo.userid},responseType:"blob"}).then((e=>{const t=window.URL.createObjectURL(new Blob([e.data])),a=document.createElement("a");a.href=t,a.setAttribute("download",this.file_id+".csv"),document.body.appendChild(a),a.click()}))},handlePreview(e){console.log(e)},submitUpload(){localStorage.setItem("file","[]"),this.$refs.upload.submit()},handleChange(e,t){console.log(e),this.fileList=t},beforeRemove(e,t){return this.$confirm(`Cancel the transfert of ${e.name} ?`)},handleRemove(e,t){console.log(e,t),this.fileList=t},handleExceed(e,t){this.$message.warning("Only 1 file can be uploaded at a time.")},handleSuccess(e,t,a){console.log(e),this.file_id=e.file_id;let s=JSON.parse(localStorage.getItem("file"));s.push(e.file_id),localStorage.setItem("file",JSON.stringify(s)),this.showUpload=!1,this.showProcess=!0}}},u=c,d=a(1001),m=(0,d.Z)(u,r,l,!1,null,null,null),p=m.exports,h=function(){var e=this,t=e._self._c;return t("form",{attrs:{enctype:"multipart/form-data"},on:{submit:function(t){return t.preventDefault(),e.uploadFile()}}},[e.uploadResult?t("div",{class:"message "+(e.uploadError?"is-danger":"is-success")},[t("div",{staticClass:"message-body"},[e._v(e._s(e.uploadResult))])]):e._e(),t("div",{staticClass:"field"},[t("div",{staticClass:"file is-boxed is-primary"},[t("label",{staticClass:"file-label"},[t("input",{ref:"files",staticClass:"file-input",attrs:{multiple:"",type:"file"},on:{change:function(t){return e.selectFile()}}}),e._m(0)])])]),t("div",{staticClass:"field"},e._l(e.files,(function(a,s){return t("div",{class:`level ${a.invalidMessage&&"has-text-danger"}`},[t("div",{staticClass:"level-left"},[t("div",{staticClass:"level-item"},[e._v(" "+e._s(a.name)+" "),a.invalidMessage?t("span",[e._v(" - "+e._s(a.invalidMessage))]):e._e()])]),t("div",{staticClass:"level-right"},[t("div",{staticClass:"level-item"},[t("a",{staticClass:"delete",on:{click:function(t){t.preventDefault(),e.files.splice(s,1),e.uploadFiles.splice(s,1)}}})])])])})),0),e._m(1)])},g=[function(){var e=this,t=e._self._c;return t("span",{staticClass:"file-cta"},[t("span",{staticClass:"span file-cta"},[t("i",{staticClass:"fas fa-upload"})]),t("span",{staticClass:"file-label"},[e._v(" Choose a file… ")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"field"},[t("button",{staticClass:"button is-info"},[e._v("Send")])])}],f=a(1579),v=a.n(f),b={name:"MultiUploads",data(){return{msg:"NMSL",showUpload:!1,files:[],uploadResult:"",uploadError:!1,uploadFiles:[],temp:0}},methods:{selectFile(e){const t=this.$refs.files.files;this.uploadFiles=[...this.uploadFiles,...t],this.files=[...this.files,...v().map(t,(e=>({name:e.name,size:e.size,type:e.type,invalidMessage:this.validate(e),lastModified:e.lastModified,lastModifiedDate:e.lastModifiedDate,webkitRelativePath:e.webkitRelativePath})))]},validate(e){const t=["text/csv","text/plain","application/json"],a=104857600;return e.size>a?`File size is too large. Maximum size is ${a} bytes.`:t.includes(e.type)?"":`File type is not allowed. Allowed types are ${t.join(", ")}`},upload(){this.showUpload=!0,n.Z.get("http://127.0.0.1:5000/upload").then((e=>{this.msg=e.data})).catch((e=>{console.log(e)}))},async uploadFile(){const e=new FormData;v().forEach(this.uploadFiles,(t=>{""===this.validate(t)&&(e.append("files"+String(this.temp),t),console.log(e["files"]),this.temp=this.temp+1)}));try{await n.Z.post("http://127.0.0.1:5000/upload",e),this.uploadError=!1,this.uploadResult="Upload successful",this.files=[],this.uploadFiles=[],this.temp=0}catch(t){this.uploadError=!0,this.uploadResult=t.response.data,this.temp=0}},autoload(){console.log("page loaded")}},mounted(){this.autoload()}},w=b,S=(0,d.Z)(w,h,g,!1,null,null,null),_=S.exports,y=function(){var e=this,t=e._self._c;return t("div")},x=[],k={name:"Dropzone",data(){return{}},methods:{},mounted(){}},C=k,M=(0,d.Z)(C,y,x,!1,null,null,null),F=M.exports,D={name:"App",components:{Upload:p,multiUploads:_,Dropzone:F}},O=D,P=(0,d.Z)(O,o,i,!1,null,"a803ab02",null),I=P.exports,$=a(2241),T=function(){var e=this,t=e._self._c;return t("el-container",[t("el-header",[t("el-menu",{attrs:{"default-active":e.activeIndex,mode:"horizontal"},on:{select:e.handleSelect}},[t("el-menu-item",{attrs:{index:"1"}},[e._v("Mapping System")]),t("el-menu-item",{attrs:{index:"2"}},[e._v("Mappings")]),t("div",{staticStyle:{float:"right","line-height":"60px","margin-right":"20px"}},[t("span",{staticStyle:{"margin-right":"10px"}},[e._v(e._s("Hi, "+e.userinfo.username))]),t("el-dropdown",[t("i",{staticClass:"el-icon-user",staticStyle:{"margin-right":"15px"}}),t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[t("el-dropdown-item",[e._v("Profile")]),t("el-dropdown-item",[t("div",{on:{click:e.signout}},[e._v("Sign Out")])])],1)],1)],1)],1)],1),t("el-main",{staticClass:"main-content",staticStyle:{"margin-top":"20%"}},[t("Upload")],1)],1)},E=[],L={name:"HomePage",components:{Upload:p},created(){this.checktoken()},data(){return{activeIndex:"1",message:"",userinfo:{}}},methods:{checktoken(e){const t=localStorage.getItem("token");if(localStorage.removeItem("file"),localStorage.setItem("file","[]"),null!==t){const e=JSON.parse(t),a=e.userinfo,s=e.expireTime;(new Date).getTime()>s?(localStorage.removeItem("tokenObj"),this.$router.push("/login")):this.userinfo=a}else this.$router.push("/login")},signout(e){localStorage.removeItem("token"),this.$router.push("/login")},handleSelect(e,t){console.log(e,t),1==e?this.$router.push("/home"):2==e&&this.$router.push("/mapping")}}},U=L,N=(0,d.Z)(U,T,E,!1,null,"6d7b38ef",null),R=N.exports,Z=function(){var e=this,t=e._self._c;return t("div",{staticClass:"login-container"},[t("div",{staticClass:"login-box"},[e.loginMessage?t("el-alert",{staticStyle:{"margin-bottom":"10px"},attrs:{title:e.loginMessage,type:""+(e.loginError?"error":"success"),"show-icon":""}}):e._e(),e._m(0),t("h3",{staticClass:"title"},[e._v("Login")]),t("el-form",{ref:"loginForm",staticClass:"login-form",attrs:{model:e.loginForm}},[t("el-form-item",{attrs:{label:"User Name",prop:"username"}},[t("el-input",{attrs:{placeholder:"Please Enter Username"},model:{value:e.loginForm.username,callback:function(t){e.$set(e.loginForm,"username",t)},expression:"loginForm.username"}})],1),t("el-form-item",{attrs:{label:"Password",prop:"password"}},[t("el-input",{attrs:{type:"password",placeholder:"Please Enter Password"},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}})],1),t("el-form-item",[t("div",[t("label",{class:"checkbox "+(e.remeberMe?"checked":""),staticStyle:{"vertical-align":"middle"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.remeberMe,expression:"remeberMe"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.remeberMe)?e._i(e.remeberMe,null)>-1:e.remeberMe},on:{change:function(t){var a=e.remeberMe,s=t.target,o=!!s.checked;if(Array.isArray(a)){var i=null,r=e._i(a,i);s.checked?r<0&&(e.remeberMe=a.concat([i])):r>-1&&(e.remeberMe=a.slice(0,r).concat(a.slice(r+1)))}else e.remeberMe=o}}})]),t("span",{staticStyle:{"vertical-align":"middle"}},[e._v("Remeber Me")])])]),t("el-form-item",[t("el-button",{staticClass:"login-button",on:{click:e.submitForm}},[e._v("Login")])],1),t("el-form-item",[t("p",[e._v("Don't have an account?"),t("router-link",{attrs:{to:"/register"}},[e._v("Sign Up")])],1)])],1)],1)])},z=[function(){var e=this,t=e._self._c;return t("a",{attrs:{href:"/home"}},[t("img",{staticClass:"uni-logo",attrs:{src:a(6722),alt:"LOGO"}})])}],A={name:"LoginPage",created(){this.getinfo()},data(){return{loginMessage:"",username:"",password:"",remeberMe:!1,loginError:!1,loginForm:{username:"",password:""}}},methods:{async submitForm(e){try{const e=await n.Z.post("http://127.0.0.1:5000/login",{username:this.loginForm.username,password:this.loginForm.password});this.remeberMe&&localStorage.setItem("remeberuser",JSON.stringify(this.loginForm.username)),this.loginError=!1,this.loginMessage=e.data.message;const t=(new Date).getTime()+108e5,a={userinfo:e.data.userinfo,expireTime:t};localStorage.setItem("token",JSON.stringify(a)),console.log(JSON.parse(localStorage.getItem("token")).userinfo),setTimeout((()=>{this.$router.push("/home")}),2e3)}catch(t){this.loginError=!0,this.loginMessage=t.response.data.message,setTimeout((()=>{this.loginMessage=""}),2e3)}},getinfo(){const e=localStorage.getItem("remeberuser");e&&(this.loginForm.username=JSON.parse(e),this.remeberMe=!0)},handleLogin(){this.$refs.loginForm.validate((e=>{if(!e)return!1}))}}},J=A,j=(0,d.Z)(J,Z,z,!1,null,"2b99a50e",null),V=j.exports,q=function(){var e=this,t=e._self._c;return t("div",{staticClass:"login-container"},[t("div",{staticClass:"login-box"},[e._m(0),t("h3",{staticClass:"title"},[e._v("Register")]),t("el-form",{ref:"registerForm",staticClass:"register-form",attrs:{model:e.registerForm,rules:e.registerFormRules}},[t("el-form-item",{attrs:{label:"Username",prop:"username"}},[t("el-input",{model:{value:e.registerForm.username,callback:function(t){e.$set(e.registerForm,"username",t)},expression:"registerForm.username"}})],1),t("el-form-item",{attrs:{label:"Email",prop:"email"}},[t("el-input",{model:{value:e.registerForm.email,callback:function(t){e.$set(e.registerForm,"email",t)},expression:"registerForm.email"}})],1),t("el-form-item",{attrs:{label:"Password",prop:"password"}},[t("el-input",{attrs:{type:"password"},model:{value:e.registerForm.password,callback:function(t){e.$set(e.registerForm,"password",t)},expression:"registerForm.password"}})],1),t("el-form-item",{attrs:{label:"Confirm Password",prop:"confirmPassword"}},[t("el-input",{attrs:{type:"password"},model:{value:e.registerForm.confirmPassword,callback:function(t){e.$set(e.registerForm,"confirmPassword",t)},expression:"registerForm.confirmPassword"}})],1),t("el-form-item",[t("el-button",{staticClass:"login-button",on:{click:e.submitForm}},[e._v("Register")])],1)],1)],1)])},B=[function(){var e=this,t=e._self._c;return t("a",{attrs:{href:"/home"}},[t("img",{staticClass:"uni-logo",attrs:{src:a(6722),alt:"LOGO"}})])}],H={name:"RegisterPage",data(){return{registerMessage:"",registerError:!1,registerForm:{username:"",email:"",password:"",confirmPassword:""},registerFormRules:{username:[{required:!0,message:"Please enter username",trigger:"blur"}],email:[{required:!0,message:"Please enter email",trigger:"blur"},{type:"email",message:"Please enter a valid email address",trigger:["blur","change"]}],password:[{required:!0,message:"Please enter password",trigger:"blur"}],confirmPassword:[{required:!0,message:"Please enter confirm password",trigger:"blur"},{validator:(e,t,a)=>{t!==this.registerForm.password?a(new Error("The two passwords do not match")):a()},trigger:"blur"}]}}},methods:{async submitForm(e){if(this.registerForm.password==this.registerForm.confirmPassword)try{const e=await n.Z.post("http://127.0.0.1:5000/register",{username:this.registerForm.username,password:this.registerForm.password,email:this.registerForm.email});this.registerError=!1,this.registerMessage=e.data.message,setTimeout((()=>{this.$router.push("/login")}),2e3)}catch(t){this.registerError=!0,this.registerMessage=t.response.data.message,setTimeout((()=>{this.registerMessage=""}),2e3)}else alert("Passwords do not match!")}}},W=H,G=(0,d.Z)(W,q,B,!1,null,"056d328b",null),X=G.exports,K=function(){var e=this,t=e._self._c;return t("div",[t("el-menu",{staticClass:"el-menu-demo",attrs:{mode:"horizontal"},on:{select:e.handleSelect}},[t("el-menu-item",{attrs:{index:"1"}},[e._v("Mapping System")]),t("el-menu-item",{attrs:{index:"2"}},[e._v("Mappings")]),t("div",{staticStyle:{float:"right","line-height":"60px","margin-right":"20px"}},[t("span",{staticStyle:{"margin-right":"10px"}},[e._v(e._s("Hi, "+e.userinfo.username))]),t("el-dropdown",[t("i",{staticClass:"el-icon-setting",staticStyle:{"margin-right":"15px"}}),t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[t("el-dropdown-item",[e._v("Profile")]),t("el-dropdown-item",[t("div",{on:{click:e.signout}},[e._v("Sign Out")])])],1)],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:12}},[t("div",{staticClass:"grid-content bg-purple"},[t("div",{ref:"pieChart",staticStyle:{height:"400px",width:"auto"}})])]),t("el-col",{attrs:{span:12}},[t("div",{staticClass:"grid-content bg-purple-light"},[t("div",{ref:"sourcepieChart",staticStyle:{height:"400px",width:"auto"}})])])],1),t("el-row",[t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData.filter((t=>!e.search||t.raw.toLowerCase().includes(e.search.toLowerCase())||t.result.toLowerCase().includes(e.search.toLowerCase()))),border:"",height:"800",stripe:""}},[t("el-table-column",{attrs:{align:"center",label:"id",prop:"index"}}),t("el-table-column",{attrs:{align:"center",label:"Raw Text",prop:"raw"}}),t("el-table-column",{attrs:{align:"center",label:"Target Text",prop:"result"}}),t("el-table-column",{attrs:{align:"center",prop:"Flag",label:"Source",width:"120",filters:[{text:"SNOMED CT",value:"SNOMED CT"},{text:"UIL",value:"UIL"}],"filter-method":e.filterTag,"filter-placement":"bottom-end"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-tag",{attrs:{type:"SNOMED CT"===a.row.Flag?"primary":"success","disable-transitions":""}},[e._v(e._s(a.row.Flag))])]}}])}),t("el-table-column",{attrs:{align:"center"},scopedSlots:e._u([{key:"header",fn:function(a){return[t("el-input",{attrs:{size:"mini",placeholder:"Type to search"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})]}},{key:"default",fn:function(a){return[t("el-button",{attrs:{size:"mini"},on:{click:function(t){e.handleEdit(a.$index,a.row),e.editDialogVisible=!0}}},[e._v(" Edit ")]),t("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(t){e.handleDelete(a.$index,a.row),e.deleteDialogVisible=!0}}},[e._v(" Delete ")])]}}])})],1)],1),t("el-dialog",{attrs:{title:"Edit",visible:e.editDialogVisible,width:"30%","before-close":e.handleClose},on:{"update:visible":function(t){e.editDialogVisible=t}}},[t("el-form",{attrs:{model:e.form}},[t("el-form-item",{attrs:{label:"Raw Text","label-width":e.formLabelWidth}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.raw,callback:function(t){e.$set(e.form,"raw",t)},expression:"form.raw"}})],1),t("el-form-item",{attrs:{label:"Target Text","label-width":e.formLabelWidth}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.form.result,callback:function(t){e.$set(e.form,"result",t)},expression:"form.result"}})],1),t("el-form-item",{attrs:{label:"Source","label-width":e.formLabelWidth}},[t("el-select",{model:{value:e.form.Flag,callback:function(t){e.$set(e.form,"Flag",t)},expression:"form.Flag"}},[t("el-option",{attrs:{label:"SNOMED CT",value:"SNOMED CT"}}),t("el-option",{attrs:{label:"UIL",value:"UIL"}})],1)],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.editDialogVisible=!1,e.cancelEdit()}}},[e._v("Cancel")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){e.editDialogVisible=!1,e.editmapping()}}},[e._v("Confirm")])],1)],1),t("el-dialog",{attrs:{title:"Warning",visible:e.deleteDialogVisible,width:"30%"},on:{"update:visible":function(t){e.deleteDialogVisible=t}}},[t("span",[e._v("Are you sure want to delete?")]),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.deleteDialogVisible=!1}}},[e._v("Cancel")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){e.deleteDialogVisible=!1,e.deletemapping()}}},[e._v("Confirm")])],1)])],1)},Q=[],Y=a(3165),ee={name:"ViewMapping",created(){this.checktoken(),this.getmapresult()},data(){return{userinfo:{},search:"",tableData:[],chartData:[{value:0,name:"no match"},{value:0,name:"match"}],chartData1:[{value:0,name:"UIL"},{value:0,name:"SNOMED CT"}],editDialogVisible:!1,deleteDialogVisible:!1,form:{raw:"123",result:"",Flag:""},formLabelWidth:"120px"}},methods:{checktoken(e){const t=localStorage.getItem("token");if(null!==t){const e=JSON.parse(t),a=e.userinfo,s=e.expireTime;(new Date).getTime()>s?(localStorage.removeItem("tokenObj"),this.$router.push("/login")):this.userinfo=a}else this.$router.push("/login")},signout(e){localStorage.removeItem("token"),this.$router.push("/login")},getmapresult(){const e=localStorage.getItem("token"),t=(JSON.parse(e),"http://127.0.0.1:5000/getmapresult/"+localStorage.getItem("mapuserid")+"/"+localStorage.getItem("mapid"));n.Z.get(t).then((e=>{this.tableData=e.data,this.chartData[0].value=0,this.chartData[1].value=0,this.chartData1[0].value=0,this.chartData1[1].value=0;for(var t=0;t<this.tableData.length;t++)this.tableData[t].index=t,"Non-Match"==this.tableData[t].result?this.chartData[0].value+=1:this.chartData[1].value+=1,"UIL"==this.tableData[t].Flag?this.chartData1[0].value+=1:this.chartData1[1].value+=1;const a=Y.S1(this.$refs.pieChart),s=Y.S1(this.$refs.sourcepieChart),o={title:{text:"Mapping Result",left:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{orient:"vertical",left:"left",data:["match","no match"]},series:[{name:"Mapping Result",type:"pie",radius:"55%",center:["50%","60%"],data:this.chartData,emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]},i={title:{text:"Mapping Source",left:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{orient:"vertical",left:"left",data:["UIL","SNOMED CT"]},series:[{name:"Mapping Source",type:"pie",radius:"55%",center:["50%","60%"],data:this.chartData1,emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}],color:["#68b8d9","#f9c14e"]};s.setOption(i),a.setOption(o)})).catch((e=>{console.log(e)}))},handleEdit(e,t){this.form=t,console.log(e,t)},handleDelete(e,t){this.form=t,console.log(e,t)},filterTag(e,t){return t.Flag===e},indexMethod(e){return e+1},handleClose(e){this.$confirm("Are you sure to cancel the edit?").then((t=>{this.cancelEdit(),e()})).catch((e=>{}))},cancelEdit(e){this.getmapresult()},editmapping(e){const t="http://127.0.0.1:5000/editmapping";n.Z.post(t,{editinfo:this.form,userid:this.userinfo["userid"],mapid:localStorage.getItem("mapid")}).then((e=>{console.log(e.data.message),this.getmapresult()})).catch((e=>{console.log(e)}))},deletemapping(e){const t="http://127.0.0.1:5000/deletemapping";n.Z.post(t,{mapinfo:this.form,userid:this.userinfo["userid"],mapid:localStorage.getItem("mapid")}).then((e=>{console.log(e.data.message),this.getmapresult()})).catch((e=>{console.log(e)}))},handleSelect(e,t){console.log(e,t),1==e?this.$router.push("/home"):2==e&&this.$router.push("/mapping")}}},te=ee,ae=(0,d.Z)(te,K,Q,!1,null,null,null),se=ae.exports,oe=function(){var e=this,t=e._self._c;return t("el-container",[t("el-header",[t("el-menu",{attrs:{"default-active":e.activeIndex,mode:"horizontal"},on:{select:e.handleSelect}},[t("el-menu-item",{attrs:{index:"1"}},[e._v("Mapping System")]),t("el-menu-item",{attrs:{index:"2"}},[e._v("Mappings")]),t("div",{staticStyle:{float:"right","line-height":"60px","margin-right":"20px"}},[t("span",{staticStyle:{"margin-right":"10px"}},[e._v(e._s("Hi, "+e.userinfo.username))]),t("el-dropdown",[t("i",{staticClass:"el-icon-user",staticStyle:{"margin-right":"15px"}}),t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[t("el-dropdown-item",[e._v("Profile")]),t("el-dropdown-item",[t("div",{on:{click:e.signout}},[e._v("Sign Out")])])],1)],1)],1)],1)],1),t("el-main",[t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.mappings.filter((t=>!e.search||t.mapid.toLowerCase().includes(e.search.toLowerCase())||t.editdate.toLowerCase().includes(e.search.toLowerCase()))),border:"",stripe:""}},[t("el-table-column",{attrs:{align:"center",prop:"mapid",label:"ID"}}),t("el-table-column",{attrs:{align:"center",prop:"username",label:"Username",width:"180"}}),t("el-table-column",{attrs:{align:"center",prop:"comment",label:"Comment",width:"180"}}),t("el-table-column",{attrs:{align:"center",prop:"editdate",label:"Created At"}}),t("el-table-column",{attrs:{align:"center",label:"Action",width:"360"},scopedSlots:e._u([{key:"header",fn:function(a){return[t("el-input",{attrs:{size:"mini",placeholder:"Type to search"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})]}},{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.viewMapping(a.row)}}},[e._v("View")]),t("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(t){return e.downloadMapping(a.row)}}},[e._v("Download")]),t("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(t){return e.deleteMapping(a.row.mapid)}}},[e._v("Delete")])]}}])})],1)],1)],1)},ie=[],re={name:"MappingPage",created(){this.checktoken(),this.getmappinginfo()},data(){return{activeIndex:"2",userinfo:{},mappings:[],search:""}},methods:{checktoken(e){const t=localStorage.getItem("token");if(null!==t){const e=JSON.parse(t),a=e.userinfo,s=e.expireTime;(new Date).getTime()>s?(localStorage.removeItem("tokenObj"),this.$router.push("/login")):this.userinfo=a}else this.$router.push("/login")},signout(e){localStorage.removeItem("token"),this.$router.push("/login")},getmappinginfo(){const e="http://127.0.0.1:5000/getmaps";n.Z.get(e,{headers:{Getmapping:"Bearer "+this.userinfo["userid"]}}).then((e=>{this.mappings=e.data.map})).catch((e=>{this.mappings=[],console.log(e)}))},deleteMapping(e){const t="http://127.0.0.1:5000/deletemap/"+e+"/"+this.userinfo["userid"];n.Z["delete"](t).then((e=>{console.log(e.data.message),this.getmappinginfo()})).catch((e=>{console.log(e)}))},viewMapping(e){console.log(e),localStorage.setItem("mapid",e.mapid),localStorage.setItem("mapuserid",e.userid),this.$router.push("/viewmapping")},downloadMapping(e){(0,n.Z)({method:"post",url:"http://127.0.0.1:5000/download",data:{file_id:e.mapid,userid:e.userid},responseType:"blob"}).then((t=>{const a=window.URL.createObjectURL(new Blob([t.data])),s=document.createElement("a");s.href=a,s.setAttribute("download",e.mapid+".csv"),document.body.appendChild(s),s.click()}))},handleSelect(e,t){console.log(e,t),1==e?this.$router.push("/home"):2==e&&this.$router.push("/mapping")}}},le=re,ne=(0,d.Z)(le,oe,ie,!1,null,"074f1a04",null),ce=ne.exports;s["default"].use($.ZP);const ue=[{path:"/",name:"index",component:R},{path:"/home",name:"HomePage",component:R,meta:{requiresAuth:!0}},{path:"/mapping",name:"MappingPage",component:ce,meta:{requiresAuth:!0}},{path:"/login",name:"Login",component:V},{path:"/register",name:"Register",component:X},{path:"/viewmapping",name:"ViewMapping",component:se,meta:{requiresAuth:!0}}],de=new $.ZP({mode:"history",base:"/",routes:ue});de.beforeEach(((e,t,a)=>{const s=localStorage.getItem("token");e.matched.some((e=>e.meta.requiresAuth))&&!s?a("/login"):a()}));var me=de,pe=a(5114),he=a.n(pe),ge=a(8596);s["default"].use(he(),{locale:ge.Z}),s["default"].config.productionTip=!0,new s["default"]({router:me,render:e=>e(I)}).$mount("#app")},6722:function(e,t,a){e.exports=a.p+"img/unimelb-logo.3a51693b.png"}},t={};function a(s){var o=t[s];if(void 0!==o)return o.exports;var i=t[s]={id:s,loaded:!1,exports:{}};return e[s].call(i.exports,i,i.exports,a),i.loaded=!0,i.exports}a.m=e,function(){a.amdO={}}(),function(){var e=[];a.O=function(t,s,o,i){if(!s){var r=1/0;for(u=0;u<e.length;u++){s=e[u][0],o=e[u][1],i=e[u][2];for(var l=!0,n=0;n<s.length;n++)(!1&i||r>=i)&&Object.keys(a.O).every((function(e){return a.O[e](s[n])}))?s.splice(n--,1):(l=!1,i<r&&(r=i));if(l){e.splice(u--,1);var c=o();void 0!==c&&(t=c)}}return t}i=i||0;for(var u=e.length;u>0&&e[u-1][2]>i;u--)e[u]=e[u-1];e[u]=[s,o,i]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var s in t)a.o(t,s)&&!a.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){a.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){a.p="/"}(),function(){var e={143:0};a.O.j=function(t){return 0===e[t]};var t=function(t,s){var o,i,r=s[0],l=s[1],n=s[2],c=0;if(r.some((function(t){return 0!==e[t]}))){for(o in l)a.o(l,o)&&(a.m[o]=l[o]);if(n)var u=n(a)}for(t&&t(s);c<r.length;c++)i=r[c],a.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return a.O(u)},s=self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=a.O(void 0,[998],(function(){return a(2693)}));s=a.O(s)})();
//# sourceMappingURL=app.915c9976.js.map