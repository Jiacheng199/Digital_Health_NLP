(function(){"use strict";var e={1863:function(e,t,a){var r=a(6369),s=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[t("router-view",{attrs:{to:"/home"}},[e._v("TEMP")])],1)},i=[],o={name:"App"},l=o,n=a(1001),c=(0,n.Z)(l,s,i,!1,null,"5f586d7f",null),m=c.exports,u=a(2631),d=function(){var e=this,t=e._self._c;return t("el-container",[t("el-header",[t("el-menu",{attrs:{"default-active":e.activeIndex,mode:"horizontal"},on:{select:e.handleSelect}},[t("el-menu-item",{attrs:{index:"1"}},[e._v("Mapping System")]),t("el-menu-item",{attrs:{index:"2"}},[e._v("Mappings")]),t("div",{staticStyle:{float:"right","line-height":"60px","margin-right":"20px"}},[t("span",{staticStyle:{"margin-right":"10px"}},[e._v(e._s("Hi, "+e.userinfo.username))]),t("el-dropdown",[t("i",{staticClass:"el-icon-user",staticStyle:{"margin-right":"15px"}}),t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[t("el-dropdown-item",[e._v("Profile")]),t("el-dropdown-item",[t("div",{on:{click:e.signout}},[e._v("Sign Out")])])],1)],1)],1)],1)],1),t("Upload")],1)},p=[],h=(a(7658),function(){var e=this,t=e._self._c;return t("el-main",{staticClass:"main-content",staticStyle:{"margin-top":"5%","padding-left":"20%","padding-right":"20%"}},[t("el-row",[t("el-col",[t("div",{staticClass:"grid-content"},[t("el-steps",{attrs:{active:e.active,"finish-status":"success",simple:""}},[t("el-step",{attrs:{title:"Upload files",icon:"el-icon-upload"}}),t("el-step",{attrs:{title:"Add Comment",icon:"el-icon-edit"}}),t("el-step",{attrs:{title:"Process"}})],1)],1)])],1),t("el-row",[t("el-col",[t("div",{staticClass:"grid-content",staticStyle:{"margin-left":"42%","margin-top":"5%"}},[e.showUpload?t("el-upload",{ref:"upload",attrs:{action:"http://127.0.0.1:5000/upload",headers:{Authorization:"Barer "+e.userid},"auto-upload":!1,"on-preview":e.handlePreview,"on-change":e.handleChange,"before-remove":e.beforeRemove,"on-remove":e.handleRemove,"on-exceed":e.handleExceed,"on-success":e.handleSuccess,"file-list":e.fileList,multiple:""}},[t("el-button",{attrs:{slot:"trigger",type:"primary"},slot:"trigger"},[e._v("select file")]),t("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"success"},on:{click:function(t){e.submitUpload(),e.next()}}},[e._v("upload to server")]),t("div",{staticClass:"el-upload__tip",staticStyle:{"font-size":"15px"},attrs:{slot:"tip"},slot:"tip"},[e._v("txt file with a size less than 200Mb")])],1):e._e(),e.showProcess?t("el-button",{on:{click:function(t){e.process(),e.next()}}},[e._v("Process")]):e._e(),e.showDownload?t("el-button",{on:{click:function(t){return e.downloadFile()}}},[e._v("Download")]):e._e()],1)])],1),e.showComment?t("el-row",[t("el-col",{staticStyle:{"margin-top":"5%","padding-left":"30%","padding-right":"30%"}},[t("el-form",{ref:"form",attrs:{model:e.form,"label-width":"120px"}},[t("el-form-item",{attrs:{label:"Comment"}},[t("el-input",{model:{value:e.comment,callback:function(t){e.comment=t},expression:"comment"}})],1),t("el-form-item",{staticStyle:{"padding-left":"30%"}},[t("el-button",{attrs:{type:"primary"},on:{click:function(t){e.next(),e.toProcess()}}},[e._v("Next")])],1)],1)],1)],1):e._e()],1)}),g=[],f=a(4161),b={name:"Upload",created(){this.showUpload=!0,this.showDownload=!1,this.showProcess=!1},data(){return{showUpload:!0,showComment:!1,showProcess:!1,showDownload:!1,file:"",fileList:[],userid:JSON.parse(localStorage.getItem("token")).userinfo.userid,file_id:"",active:0,comment:""}},methods:{process(){console.log(JSON.parse(localStorage.getItem("file"))[0]),console.log(JSON.parse(localStorage.getItem("token")).userinfo.userid),this.fileList=[],this.showProcess=!1,this.showUpload=!0;try{const e=f.Z.post("http://127.0.0.1:5000/process",{file_id:JSON.parse(localStorage.getItem("file")),userid:JSON.parse(localStorage.getItem("token")).userinfo,comment:this.comment});console.log(e)}catch(e){console.log(e)}},downloadFile(e){(0,f.Z)({method:"post",url:"http://127.0.0.1:5000/download",data:{file_id:this.file_id,userid:JSON.parse(localStorage.getItem("token")).userinfo.userid},responseType:"blob"}).then((e=>{const t=window.URL.createObjectURL(new Blob([e.data])),a=document.createElement("a");a.href=t,a.setAttribute("download",this.file_id+".csv"),document.body.appendChild(a),a.click()}))},handlePreview(e){console.log(e)},submitUpload(){localStorage.setItem("file","[]"),this.$refs.upload.submit()},handleChange(e,t){console.log(e),this.fileList=t},beforeRemove(e,t){return this.$confirm(`Cancel the transfert of ${e.name} ?`)},handleRemove(e,t){console.log(e,t),this.fileList=t},handleExceed(e,t){this.$message.warning("Only 1 file can be uploaded at a time.")},handleSuccess(e,t,a){console.log(e),this.file_id=e.file_id;let r=JSON.parse(localStorage.getItem("file"));r.push(e.file_id),localStorage.setItem("file",JSON.stringify(r)),this.showUpload=!1,this.showComment=!0},next(){this.active++>1&&(this.active=0)},toProcess(){this.showComment=!1,this.showProcess=!0}}},v=b,_=(0,n.Z)(v,h,g,!1,null,null,null),w=_.exports,S={name:"HomePage",components:{Upload:w},created(){this.checktoken()},data(){return{activeIndex:"1",message:"",userinfo:{}}},methods:{checktoken(e){const t=localStorage.getItem("token");if(localStorage.removeItem("file"),localStorage.setItem("file","[]"),null!==t){const e=JSON.parse(t),a=e.userinfo,r=e.expireTime;(new Date).getTime()>r?(localStorage.removeItem("tokenObj"),this.$router.push("/login")):this.userinfo=a}else this.$router.push("/login")},signout(e){localStorage.removeItem("token"),this.$router.push("/login")},handleSelect(e,t){console.log(e,t),1==e?this.$router.push("/home"):2==e&&this.$router.push("/mapping")}}},y=S,x=(0,n.Z)(y,d,p,!1,null,"68bff0b8",null),D=x.exports,k=function(){var e=this,t=e._self._c;return t("div",{staticClass:"login-container"},[t("div",{staticClass:"login-box"},[e.loginMessage?t("el-alert",{staticStyle:{"margin-bottom":"10px"},attrs:{title:e.loginMessage,type:""+(e.loginError?"error":"success"),"show-icon":""}}):e._e(),e._m(0),t("h3",{staticClass:"title"},[e._v("Login")]),t("el-form",{ref:"loginForm",staticClass:"login-form",attrs:{model:e.loginForm}},[t("el-form-item",{attrs:{label:"User Name",prop:"username"}},[t("el-input",{attrs:{placeholder:"Please Enter Username"},model:{value:e.loginForm.username,callback:function(t){e.$set(e.loginForm,"username",t)},expression:"loginForm.username"}})],1),t("el-form-item",{attrs:{label:"Password",prop:"password"}},[t("el-input",{attrs:{type:"password",placeholder:"Please Enter Password"},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}})],1),t("el-form-item",[t("div",[t("label",{class:"checkbox "+(e.remeberMe?"checked":""),staticStyle:{"vertical-align":"middle"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.remeberMe,expression:"remeberMe"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.remeberMe)?e._i(e.remeberMe,null)>-1:e.remeberMe},on:{change:function(t){var a=e.remeberMe,r=t.target,s=!!r.checked;if(Array.isArray(a)){var i=null,o=e._i(a,i);r.checked?o<0&&(e.remeberMe=a.concat([i])):o>-1&&(e.remeberMe=a.slice(0,o).concat(a.slice(o+1)))}else e.remeberMe=s}}})]),t("span",{staticStyle:{"vertical-align":"middle"}},[e._v("Remeber Me")])])]),t("el-form-item",[t("el-button",{staticClass:"login-button",on:{click:e.submitForm}},[e._v("Login")])],1),t("el-form-item",[t("p",[e._v("Don't have an account?"),t("router-link",{attrs:{to:"/register"}},[e._v("Sign Up")])],1)])],1)],1)])},C=[function(){var e=this,t=e._self._c;return t("a",{attrs:{href:"/home"}},[t("img",{staticClass:"uni-logo",attrs:{src:a(6722),alt:"LOGO"}})])}],M={name:"LoginPage",created(){this.getinfo()},data(){return{loginMessage:"",username:"",password:"",remeberMe:!1,loginError:!1,loginForm:{username:"",password:""}}},methods:{async submitForm(e){try{const e=await f.Z.post("http://127.0.0.1:5000/login",{username:this.loginForm.username,password:this.loginForm.password});this.remeberMe&&localStorage.setItem("remeberuser",JSON.stringify(this.loginForm.username)),this.loginError=!1,this.loginMessage=e.data.message;const t=(new Date).getTime()+108e5,a={userinfo:e.data.userinfo,expireTime:t};localStorage.setItem("token",JSON.stringify(a)),console.log(JSON.parse(localStorage.getItem("token")).userinfo),setTimeout((()=>{this.$router.push("/home")}),2e3)}catch(t){this.loginError=!0,this.loginMessage=t.response.data.message,setTimeout((()=>{this.loginMessage=""}),2e3)}},getinfo(){const e=localStorage.getItem("remeberuser");e&&(this.loginForm.username=JSON.parse(e),this.remeberMe=!0)},handleLogin(){this.$refs.loginForm.validate((e=>{if(!e)return!1}))}}},O=M,I=(0,n.Z)(O,k,C,!1,null,"2b99a50e",null),P=I.exports,F=function(){var e=this,t=e._self._c;return t("div",{staticClass:"login-container"},[t("div",{staticClass:"login-box"},[e._m(0),t("h3",{staticClass:"title"},[e._v("Register")]),t("el-form",{ref:"registerForm",staticClass:"register-form",attrs:{model:e.registerForm,rules:e.registerFormRules}},[t("el-form-item",{attrs:{label:"Username",prop:"username"}},[t("el-input",{model:{value:e.registerForm.username,callback:function(t){e.$set(e.registerForm,"username",t)},expression:"registerForm.username"}})],1),t("el-form-item",{attrs:{label:"Email",prop:"email"}},[t("el-input",{model:{value:e.registerForm.email,callback:function(t){e.$set(e.registerForm,"email",t)},expression:"registerForm.email"}})],1),t("el-form-item",{attrs:{label:"Password",prop:"password"}},[t("el-input",{attrs:{type:"password"},model:{value:e.registerForm.password,callback:function(t){e.$set(e.registerForm,"password",t)},expression:"registerForm.password"}})],1),t("el-form-item",{attrs:{label:"Confirm Password",prop:"confirmPassword"}},[t("el-input",{attrs:{type:"password"},model:{value:e.registerForm.confirmPassword,callback:function(t){e.$set(e.registerForm,"confirmPassword",t)},expression:"registerForm.confirmPassword"}})],1),t("el-form-item",[t("el-button",{staticClass:"login-button",on:{click:e.submitForm}},[e._v("Register")])],1)],1)],1)])},L=[function(){var e=this,t=e._self._c;return t("a",{attrs:{href:"/home"}},[t("img",{staticClass:"uni-logo",attrs:{src:a(6722),alt:"LOGO"}})])}],T={name:"RegisterPage",data(){return{registerMessage:"",registerError:!1,registerForm:{username:"",email:"",password:"",confirmPassword:""},registerFormRules:{username:[{required:!0,message:"Please enter username",trigger:"blur"}],email:[{required:!0,message:"Please enter email",trigger:"blur"},{type:"email",message:"Please enter a valid email address",trigger:["blur","change"]}],password:[{required:!0,message:"Please enter password",trigger:"blur"}],confirmPassword:[{required:!0,message:"Please enter confirm password",trigger:"blur"},{validator:(e,t,a)=>{t!==this.registerForm.password?a(new Error("The two passwords do not match")):a()},trigger:"blur"}]}}},methods:{async submitForm(e){if(this.registerForm.password==this.registerForm.confirmPassword)try{const e=await f.Z.post("http://127.0.0.1:5000/register",{username:this.registerForm.username,password:this.registerForm.password,email:this.registerForm.email});this.registerError=!1,this.registerMessage=e.data.message,setTimeout((()=>{this.$router.push("/login")}),2e3)}catch(t){this.registerError=!0,this.registerMessage=t.response.data.message,setTimeout((()=>{this.registerMessage=""}),2e3)}else alert("Passwords do not match!")}}},$=T,E=(0,n.Z)($,F,L,!1,null,"056d328b",null),U=E.exports,N=function(){var e=this,t=e._self._c;return t("div",[t("el-menu",{staticClass:"el-menu-demo",attrs:{mode:"horizontal"},on:{select:e.handleSelect}},[t("el-menu-item",{attrs:{index:"1"}},[e._v("Mapping System")]),t("el-menu-item",{attrs:{index:"2"}},[e._v("Mappings")]),t("div",{staticStyle:{float:"right","line-height":"60px","margin-right":"20px"}},[t("span",{staticStyle:{"margin-right":"10px"}},[e._v(e._s("Hi, "+e.userinfo.username))]),t("el-dropdown",[t("i",{staticClass:"el-icon-user",staticStyle:{"margin-right":"15px"}}),t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[t("el-dropdown-item",[e._v("Profile")]),t("el-dropdown-item",[t("div",{on:{click:e.signout}},[e._v("Sign Out")])])],1)],1)],1)],1),t("el-row",[t("el-col",{attrs:{span:8}},[t("div",{staticClass:"grid-content bg-purple"},[t("div",{ref:"pieChart",staticStyle:{height:"400px",width:"auto"}})])]),t("el-col",{attrs:{span:8}},[t("div",{staticClass:"grid-content bg-purple-light"},[t("div",{ref:"sourcepieChart",staticStyle:{height:"400px",width:"auto"}})])]),t("el-col",{attrs:{span:8}},[t("div",{staticClass:"grid-content bg-purple-light"},[t("div",{ref:"distancepieChart",staticStyle:{height:"400px",width:"auto"}})])])],1),t("el-row",[t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData.filter((t=>!e.search||t.raw_data.toLowerCase().includes(e.search.toLowerCase())||t.out_put_data.toLowerCase().includes(e.search.toLowerCase()))),border:"",height:"800",stripe:""}},[t("el-table-column",{attrs:{align:"center",label:"id",prop:"index"}}),t("el-table-column",{attrs:{align:"center",label:"Raw Text",prop:"raw_data",sortable:""}}),t("el-table-column",{attrs:{align:"center",label:"Target Text",prop:"out_put_data",sortable:""}}),t("el-table-column",{attrs:{align:"center",label:"Mapping Distance",prop:"distance",sortable:""}}),t("el-table-column",{attrs:{align:"center",label:"Modify History",prop:"history",sortable:""}}),t("el-table-column",{attrs:{align:"center",prop:"result_from",label:"Source",width:"120",filters:[{text:"SNOMED CT",value:"SNOMED CT"},{text:"UIL",value:"UIL"}],"filter-method":e.filterTag,"filter-placement":"bottom-end"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-tag",{attrs:{type:"SNOMED CT"===a.row.result_from?"primary":"success","disable-transitions":""}},[e._v(e._s(a.row.result_from))])]}}])}),t("el-table-column",{attrs:{align:"center"},scopedSlots:e._u([{key:"header",fn:function(a){return[t("el-input",{attrs:{size:"mini",placeholder:"Type to search"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})]}},{key:"default",fn:function(a){return[t("el-button",{attrs:{size:"mini"},on:{click:function(t){e.handleEdit(a.$index,a.row),e.editDialogVisible=!0}}},[e._v(" Edit ")]),t("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(t){e.handleDelete(a.$index,a.row),e.deleteDialogVisible=!0}}},[e._v(" Delete ")])]}}])})],1)],1),t("el-dialog",{attrs:{title:"Edit",visible:e.editDialogVisible,width:"30%","before-close":e.handleClose},on:{"update:visible":function(t){e.editDialogVisible=t}}},[t("el-form",{attrs:{model:e.form}},[t("el-form-item",{attrs:{label:"Source","label-width":e.formLabelWidth}},[t("el-input",{attrs:{disabled:!0},model:{value:e.form.result_from,callback:function(t){e.$set(e.form,"result_from",t)},expression:"form.result_from"}})],1),t("el-form-item",{attrs:{label:"Distance","label-width":e.formLabelWidth}},[t("el-input",{attrs:{disabled:!0},model:{value:e.form.distance,callback:function(t){e.$set(e.form,"distance",t)},expression:"form.distance"}})],1),t("el-form-item",{attrs:{label:"Raw Text","label-width":e.formLabelWidth}},[t("el-input",{attrs:{disabled:!0},model:{value:e.form.raw_data,callback:function(t){e.$set(e.form,"raw_data",t)},expression:"form.raw_data"}})],1),t("el-form-item",{attrs:{label:"Target Text","label-width":e.formLabelWidth}},[t("el-autocomplete",{staticClass:"inline-input",attrs:{"fetch-suggestions":e.querySearch},on:{select:e.handleSelectedit,input:e.handleInput},model:{value:e.form.out_put_data,callback:function(t){e.$set(e.form,"out_put_data",t)},expression:"form.out_put_data"}})],1)],1),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.editDialogVisible=!1,e.cancelEdit()}}},[e._v("Cancel")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){e.editDialogVisible=!1,e.editmapping()}}},[e._v("Confirm")])],1)],1),t("el-dialog",{attrs:{title:"Warning",visible:e.deleteDialogVisible,width:"30%"},on:{"update:visible":function(t){e.deleteDialogVisible=t}}},[t("span",[e._v("Are you sure want to delete?")]),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.deleteDialogVisible=!1}}},[e._v("Cancel")]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){e.deleteDialogVisible=!1,e.deletemapping()}}},[e._v("Confirm")])],1)])],1)},Z=[],R=a(9043),A={name:"ViewMapping",created(){this.checktoken(),this.getmapresult()},data(){return{userinfo:{},search:"",tableData:[],chartData:[{value:0,name:"no match"},{value:0,name:"match"}],chartData1:[{value:0,name:"UIL"},{value:0,name:"SNOMED CT"}],chartData2:[{value:0,name:"0-5"},{value:0,name:"5-10"},{value:0,name:"10-20"},{value:0,name:"20-30"},{value:0,name:"30-50"},{value:0,name:"50+"}],editDialogVisible:!1,deleteDialogVisible:!1,form:{raw:"123",result:"",Flag:""},formLabelWidth:"120px"}},methods:{checktoken(e){const t=localStorage.getItem("token");if(null!==t){const e=JSON.parse(t),a=e.userinfo,r=e.expireTime;(new Date).getTime()>r?(localStorage.removeItem("tokenObj"),this.$router.push("/login")):this.userinfo=a}else this.$router.push("/login")},signout(e){localStorage.removeItem("token"),this.$router.push("/login")},getmapresult(){const e=localStorage.getItem("token"),t=(JSON.parse(e),"http://127.0.0.1:5000/getmapresult/"+localStorage.getItem("mapuserid")+"/"+localStorage.getItem("mapid"));f.Z.get(t).then((e=>{this.tableData=e.data,this.chartData[0].value=0,this.chartData[1].value=0,this.chartData1[0].value=0,this.chartData1[1].value=0,this.chartData2[0].value=0,this.chartData2[1].value=0,this.chartData2[2].value=0,this.chartData2[3].value=0,this.chartData2[4].value=0,this.chartData2[5].value=0;for(var t=0;t<this.tableData.length;t++)this.tableData[t].index=t,"Non-Match"==this.tableData[t].out_put_data?this.chartData[0].value+=1:this.chartData[1].value+=1,"UIL"==this.tableData[t].result_from?this.chartData1[0].value+=1:this.chartData1[1].value+=1,this.tableData[t].distance<=5&&this.tableData[t].distance>=0?this.chartData2[0].value+=1:this.tableData[t].distance<=10&&this.tableData[t].distance>5?this.chartData2[1].value+=1:this.tableData[t].distance<=20&&this.tableData[t].distance>10?this.chartData2[2].value+=1:this.tableData[t].distance<=30&&this.tableData[t].distance>20?this.chartData2[3].value+=1:this.tableData[t].distance<=50&&this.tableData[t].distance>30?this.chartData2[4].value+=1:this.tableData[t].distance>50&&(this.chartData2[5].value+=1);const a=R.S1(this.$refs.pieChart),r=R.S1(this.$refs.sourcepieChart),s=R.S1(this.$refs.distancepieChart),i={title:{text:"Mapping Result",left:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{orient:"vertical",left:"left",data:["match","no match"]},series:[{name:"Mapping Result",type:"pie",radius:"55%",center:["50%","60%"],data:this.chartData,emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]},o={title:{text:"Mapping Source",left:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{orient:"vertical",left:"left",data:["UIL","SNOMED CT"]},series:[{name:"Mapping Source",type:"pie",radius:"55%",center:["50%","60%"],data:this.chartData1,emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}],color:["#68b8d9","#f9c14e"]},l={title:{text:"Mapping Distance",left:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{orient:"vertical",left:"left",data:["0-5","5-10","10-20","20-30","30-50","50+"]},series:[{name:"Mapping Distance",type:"pie",radius:"55%",center:["50%","60%"],data:this.chartData2,emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]};s.setOption(l),r.setOption(o),a.setOption(i)})).catch((e=>{console.log(e)}))},handleEdit(e,t){this.form=t;for(var a=[],r=0;r<t.snomed_ct_possible_list.length;r++)a.push({value:t.snomed_ct_possible_list[r]});for(r=0;r<t.uil_possible_list.length;r++)a.push({value:t.uil_possible_list[r]});a.push({value:"Non-Match"}),this.$set(this.form,"allresult",a)},handleDelete(e,t){this.form=t,console.log(e,t)},filterTag(e,t){return t.Flag===e},indexMethod(e){return e+1},handleClose(e){this.$confirm("Are you sure to cancel the edit?").then((t=>{this.cancelEdit(),e()})).catch((e=>{}))},cancelEdit(e){this.getmapresult()},editmapping(e){const t="http://127.0.0.1:5000/editmapping";this.form.history=this.userinfo.username,f.Z.post(t,{editinfo:this.form,userid:localStorage.getItem("mapuserid"),mapid:localStorage.getItem("mapid")}).then((e=>{console.log(e.data.message),this.getmapresult()})).catch((e=>{console.log(e)}))},deletemapping(e){const t="http://127.0.0.1:5000/deletemapping";f.Z.post(t,{mapinfo:this.form,userid:this.userinfo["userid"],mapid:localStorage.getItem("mapid")}).then((e=>{console.log(e.data.message),this.getmapresult()})).catch((e=>{console.log(e)}))},handleSelect(e,t){console.log(e,t),1==e?this.$router.push("/home"):2==e&&this.$router.push("/mapping")},handleeditchange(){"Non-Match"==this.form.out_put_data?this.form.result_from="UIL":this.form.snomed_ct_possible_list.includes(this.form.out_put_data)?this.form.result_from="SNOMED CT":this.form.result_from="UIL"},querySearch(e,t){var a=this.form.allresult,r=e?a.filter(this.createFilter(e)):a;t(r)},createFilter(e){return t=>0===t.value.toLowerCase().indexOf(e.toLowerCase())},handleInput(e){"Non-Match"==e?(this.form.result_from="UIL",this.form.distance=999):this.form.snomed_ct_possible_list.includes(e)?(this.form.result_from="SNOMED CT",this.form.distance=this.form.sn_dist_list[this.form.snomed_ct_possible_list.indexOf(e)]):this.form.uil_possible_list.includes(e)?(this.form.result_from="UIL",this.form.distance=this.form.uil_dist_list[this.form.uil_possible_list.indexOf(e)]):(this.form.result_from="UIL",this.form.distance=0)},handleSelectedit(e){"Non-Match"==this.form.out_put_data?this.form.result_from="UIL":this.form.snomed_ct_possible_list.includes(this.form.out_put_data)?(this.form.result_from="SNOMED CT",this.form.distance=this.form.sn_dist_list[this.form.snomed_ct_possible_list.indexOf(this.form.out_put_data)]):this.form.uil_possible_list.includes(this.form.out_put_data)?(this.form.result_from="UIL",this.form.distance=this.form.uil_dist_list[this.form.uil_possible_list.indexOf(this.form.out_put_data)]):(this.form.result_from="UIL",this.form.distance=0)}}},J=A,V=(0,n.Z)(J,N,Z,!1,null,null,null),j=V.exports,z=function(){var e=this,t=e._self._c;return t("el-container",[t("el-header",[t("el-menu",{attrs:{"default-active":e.activeIndex,mode:"horizontal"},on:{select:e.handleSelect}},[t("el-menu-item",{attrs:{index:"1"}},[e._v("Mapping System")]),t("el-menu-item",{attrs:{index:"2"}},[e._v("Mappings")]),t("div",{staticStyle:{float:"right","line-height":"60px","margin-right":"20px"}},[t("span",{staticStyle:{"margin-right":"10px"}},[e._v(e._s("Hi, "+e.userinfo.username))]),t("el-dropdown",[t("i",{staticClass:"el-icon-user",staticStyle:{"margin-right":"15px"}}),t("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[t("el-dropdown-item",[e._v("Profile")]),t("el-dropdown-item",[t("div",{on:{click:e.signout}},[e._v("Sign Out")])])],1)],1)],1)],1)],1),t("el-main",[t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.mappings.filter((t=>!e.search||t.comment.toLowerCase().includes(e.search.toLowerCase()))),"default-sort":{prop:"editdate",order:"descending"},border:"",stripe:""}},[t("el-table-column",{attrs:{align:"center",prop:"mapid",label:"ID"}}),t("el-table-column",{attrs:{align:"center",prop:"username",label:"Username",width:"180",sortable:""}}),t("el-table-column",{attrs:{align:"center",prop:"comment",label:"Comment",width:"180"}}),t("el-table-column",{attrs:{align:"center",prop:"status",label:"Status",width:"180",filters:[{text:"Pending",value:"Pending"},{text:"Completed",value:"Completed"}],"filter-method":e.filterTag,"filter-placement":"bottom-end"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-tag",{attrs:{type:"Pending"===a.row.status?"warning":"primary","disable-transitions":""}},[e._v(e._s(a.row.status))])]}}])}),t("el-table-column",{attrs:{align:"center",prop:"editdate",label:"Created At",sortable:""}}),t("el-table-column",{attrs:{align:"center",label:"Action",width:"360"},scopedSlots:e._u([{key:"header",fn:function(a){return[t("el-input",{attrs:{size:"mini",placeholder:"Type to search"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})]}},{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.viewMapping(a.row)}}},[e._v("View")]),t("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(t){return e.downloadMapping(a.row)}}},[e._v("Download")]),t("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(t){return e.deleteMapping(a.row.mapid)}}},[e._v("Delete")])]}}])})],1)],1)],1)},q=[],B={name:"MappingPage",created(){this.checktoken(),this.getmappinginfo()},data(){return{activeIndex:"2",userinfo:{},mappings:[],search:""}},methods:{checktoken(e){const t=localStorage.getItem("token");if(null!==t){const e=JSON.parse(t),a=e.userinfo,r=e.expireTime;(new Date).getTime()>r?(localStorage.removeItem("tokenObj"),this.$router.push("/login")):this.userinfo=a}else this.$router.push("/login")},signout(e){localStorage.removeItem("token"),this.$router.push("/login")},getmappinginfo(){const e="http://127.0.0.1:5000/getmaps";f.Z.get(e,{headers:{Getmapping:"Bearer "+this.userinfo["userid"]}}).then((e=>{this.mappings=e.data.map})).catch((e=>{this.mappings=[],console.log(e)}))},deleteMapping(e){const t="http://127.0.0.1:5000/deletemap/"+e+"/"+this.userinfo["userid"];f.Z["delete"](t).then((e=>{console.log(e.data.message),this.getmappinginfo()})).catch((e=>{console.log(e)}))},viewMapping(e){console.log(e),localStorage.setItem("mapid",e.mapid),localStorage.setItem("mapuserid",e.userid),this.$router.push("/viewmapping")},downloadMapping(e){(0,f.Z)({method:"post",url:"http://127.0.0.1:5000/download",data:{file_id:e.mapid,userid:e.userid},responseType:"blob"}).then((t=>{const a=window.URL.createObjectURL(new Blob([t.data])),r=document.createElement("a");r.href=a,r.setAttribute("download",e.mapid+".csv"),document.body.appendChild(r),r.click()}))},handleSelect(e,t){console.log(e,t),1==e?this.$router.push("/home"):2==e&&this.$router.push("/mapping")},filterTag(e,t){return t.status===e}}},H=B,W=(0,n.Z)(H,z,q,!1,null,"308be566",null),G=W.exports;r["default"].use(u.ZP);const X=[{path:"/",name:"index",component:D},{path:"/home",name:"HomePage",component:D,meta:{requiresAuth:!0}},{path:"/mapping",name:"MappingPage",component:G,meta:{requiresAuth:!0}},{path:"/login",name:"Login",component:P},{path:"/register",name:"Register",component:U},{path:"/viewmapping",name:"ViewMapping",component:j,meta:{requiresAuth:!0}}],K=new u.ZP({mode:"history",base:"/",routes:X});K.beforeEach(((e,t,a)=>{const r=localStorage.getItem("token");e.matched.some((e=>e.meta.requiresAuth))&&!r?a("/login"):a()}));var Q=K,Y=a(8499),ee=a.n(Y),te=a(4193);r["default"].use(ee(),{locale:te.Z}),r["default"].config.productionTip=!0,new r["default"]({router:Q,render:e=>e(m)}).$mount("#app")},6722:function(e,t,a){e.exports=a.p+"img/unimelb-logo.3a51693b.png"}},t={};function a(r){var s=t[r];if(void 0!==s)return s.exports;var i=t[r]={id:r,loaded:!1,exports:{}};return e[r](i,i.exports,a),i.loaded=!0,i.exports}a.m=e,function(){a.amdO={}}(),function(){var e=[];a.O=function(t,r,s,i){if(!r){var o=1/0;for(m=0;m<e.length;m++){r=e[m][0],s=e[m][1],i=e[m][2];for(var l=!0,n=0;n<r.length;n++)(!1&i||o>=i)&&Object.keys(a.O).every((function(e){return a.O[e](r[n])}))?r.splice(n--,1):(l=!1,i<o&&(o=i));if(l){e.splice(m--,1);var c=s();void 0!==c&&(t=c)}}return t}i=i||0;for(var m=e.length;m>0&&e[m-1][2]>i;m--)e[m]=e[m-1];e[m]=[r,s,i]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){a.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){a.p="/"}(),function(){var e={143:0};a.O.j=function(t){return 0===e[t]};var t=function(t,r){var s,i,o=r[0],l=r[1],n=r[2],c=0;if(o.some((function(t){return 0!==e[t]}))){for(s in l)a.o(l,s)&&(a.m[s]=l[s]);if(n)var m=n(a)}for(t&&t(r);c<o.length;c++)i=o[c],a.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return a.O(m)},r=self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=a.O(void 0,[998],(function(){return a(1863)}));r=a.O(r)})();
//# sourceMappingURL=app.441741b2.js.map